syntax "proto3";

package upload;

service UploadService{
  rpc UploadFile(GetUploadFile) return (ReturnUploadFile) {}
}

message GetUploadFile {
  string filename = 1;
  bytes chunk_data = 2;
  int64 offset = 3; // byte offset of this chunk within the file
  int64 total_size = 4; // total file size in bytes (if known)
  string content_type = 5;
  bool is_last = 6; // true for the final chunk of that file
  string upload_id = 7; // client- or server-generated upload session id
  int32 chunk_size = 8; // length of chunk_data in bytes
}

// Wrapper to send an array (multiple files). Use this as the RPC request
// if you want to send whole files (or per-file chunk streams).
message UploadFiles {
  repeated GetUploadFile files = 1;
}

message ReturnUploadFile {
  repeated string urls = 1;
}